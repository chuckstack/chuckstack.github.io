<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Hybrid Cloud Strategy: Incus + Netbird + PhoenixNAP</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <script data-host="https://app.microanalytics.io" data-dnt="false" src="https://app.microanalytics.io/js/script.js" id="ZwSg9rf6GA" async defer></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ul class="chapter">
                    <li><a class="active" href="../">chuck-stack Home</a></li> <!--chuboe changed-->
                </ul>
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="picture-success.html"><strong aria-hidden="true">2.</strong> Picture of Success</a></li><li class="chapter-item expanded "><a href="success-factor.html"><strong aria-hidden="true">3.</strong> Success Factors</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="success-cli.html"><strong aria-hidden="true">3.1.</strong> Success with CLI</a></li><li class="chapter-item expanded "><a href="success-linux.html"><strong aria-hidden="true">3.2.</strong> Success with Linux</a></li><li class="chapter-item expanded "><a href="success-postgresql.html"><strong aria-hidden="true">3.3.</strong> Success with PostgreSQL</a></li><li class="chapter-item expanded "><a href="success-api.html"><strong aria-hidden="true">3.4.</strong> Success with API</a></li><li class="chapter-item expanded "><a href="success-ai.html"><strong aria-hidden="true">3.5.</strong> Success with AI</a></li></ol></li><li class="chapter-item expanded "><a href="getting-started.html"><strong aria-hidden="true">4.</strong> Getting Started</a></li><li class="chapter-item expanded "><a href="stack-faq.html"><strong aria-hidden="true">5.</strong> Stack FAQ</a></li><li class="chapter-item expanded "><a href="stack-tools.html"><strong aria-hidden="true">6.</strong> Stack Tools</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="tool-incus.html"><strong aria-hidden="true">6.1.</strong> Incus</a></li><li class="chapter-item expanded "><a href="tool-linux.html"><strong aria-hidden="true">6.2.</strong> Linux</a></li><li class="chapter-item expanded "><a href="tool-postgresql.html"><strong aria-hidden="true">6.3.</strong> PostgreSQL</a></li><li class="chapter-item expanded "><a href="tool-postgrest.html"><strong aria-hidden="true">6.4.</strong> PostgREST</a></li><li class="chapter-item expanded "><a href="tool-aichat.html"><strong aria-hidden="true">6.5.</strong> AIChat</a></li><li class="chapter-item expanded "><a href="tool-nushell.html"><strong aria-hidden="true">6.6.</strong> Nushell</a></li><li class="chapter-item expanded "><a href="tool-zellij.html"><strong aria-hidden="true">6.7.</strong> Zellij</a></li><li class="chapter-item expanded "><a href="tool-git.html"><strong aria-hidden="true">6.8.</strong> Git</a></li><li class="chapter-item expanded "><a href="tool-obsidian.html"><strong aria-hidden="true">6.9.</strong> Obsidian</a></li><li class="chapter-item expanded "><a href="tool-netbird.html"><strong aria-hidden="true">6.10.</strong> Netbird</a></li><li class="chapter-item expanded "><a href="tool-htmx.html"><strong aria-hidden="true">6.11.</strong> htmx</a></li><li class="chapter-item expanded "><a href="tool-discourse.html"><strong aria-hidden="true">6.12.</strong> Discourse</a></li><li class="chapter-item expanded "><a href="tool-mdbook.html"><strong aria-hidden="true">6.13.</strong> mdBook</a></li><li class="chapter-item expanded "><a href="tool-others.html"><strong aria-hidden="true">6.14.</strong> Others</a></li></ol></li><li class="chapter-item expanded "><a href="stack-architecture.html"><strong aria-hidden="true">7.</strong> Stack Architecture</a></li><li class="chapter-item expanded "><a href="stack-application.html"><strong aria-hidden="true">8.</strong> Stack Application</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="application-deploy.html"><strong aria-hidden="true">8.1.</strong> Deployment</a></li><li class="chapter-item expanded "><a href="application-workflow.html"><strong aria-hidden="true">8.2.</strong> Workflow</a></li><li class="chapter-item expanded "><a href="application-attribute.html"><strong aria-hidden="true">8.3.</strong> Attribute Tagging</a></li></ol></li><li class="chapter-item expanded "><a href="best-practices.html"><strong aria-hidden="true">9.</strong> Stack Best Practices</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="best-practices-operation.html"><strong aria-hidden="true">9.1.</strong> Operation Best Practices</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="best-practices-operation-say.html"><strong aria-hidden="true">9.1.1.</strong> Say What We Do</a></li><li class="chapter-item expanded "><a href="best-practices-operation-do.html"><strong aria-hidden="true">9.1.2.</strong> Do What We Said</a></li><li class="chapter-item expanded "><a href="best-practices-operation-prove.html"><strong aria-hidden="true">9.1.3.</strong> Prove We Did It</a></li><li class="chapter-item expanded "><a href="best-practices-operation-feedback.html"><strong aria-hidden="true">9.1.4.</strong> Welcome Feedback</a></li><li class="chapter-item expanded "><a href="best-practices-operation-improve.html"><strong aria-hidden="true">9.1.5.</strong> Continuously Improve</a></li></ol></li><li class="chapter-item expanded "><a href="postgres-conventions.html"><strong aria-hidden="true">9.2.</strong> Postgres Conventions</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="postgres-convention/schema.html"><strong aria-hidden="true">9.2.1.</strong> Private and API Schema</a></li><li class="chapter-item expanded "><a href="postgres-convention/abbreviation.html"><strong aria-hidden="true">9.2.2.</strong> Abbreviation</a></li><li class="chapter-item expanded "><a href="postgres-convention/table-convention.html"><strong aria-hidden="true">9.2.3.</strong> Table Convention</a></li><li class="chapter-item expanded "><a href="postgres-convention/column-convention.html"><strong aria-hidden="true">9.2.4.</strong> Column Convention</a></li><li class="chapter-item expanded "><a href="postgres-convention/table-record-convention.html"><strong aria-hidden="true">9.2.5.</strong> Table and Record</a></li><li class="chapter-item expanded "><a href="postgres-convention/uuid.html"><strong aria-hidden="true">9.2.6.</strong> UUID</a></li><li class="chapter-item expanded "><a href="postgres-convention/json-array-table-column.html"><strong aria-hidden="true">9.2.7.</strong> JSON vs Array vs Table</a></li><li class="chapter-item expanded "><a href="postgres-convention/enum-type-convention.html"><strong aria-hidden="true">9.2.8.</strong> enum and Type</a></li><li class="chapter-item expanded "><a href="postgres-convention/system-configuration-convention.html"><strong aria-hidden="true">9.2.9.</strong> System Configuration</a></li><li class="chapter-item expanded "><a href="postgres-convention/attribute-tag.html"><strong aria-hidden="true">9.2.10.</strong> Attribute Tagging</a></li><li class="chapter-item expanded "><a href="postgres-convention/statistics-convention.html"><strong aria-hidden="true">9.2.11.</strong> Statistics</a></li><li class="chapter-item expanded "><a href="postgres-convention/partition-convention.html"><strong aria-hidden="true">9.2.12.</strong> Partition</a></li><li class="chapter-item expanded "><a href="postgres-convention/function-convention.html"><strong aria-hidden="true">9.2.13.</strong> Function</a></li><li class="chapter-item expanded "><a href="postgres-convention/trigger-convention.html"><strong aria-hidden="true">9.2.14.</strong> Trigger</a></li><li class="chapter-item expanded "><a href="postgres-convention/async.html"><strong aria-hidden="true">9.2.15.</strong> Async</a></li><li class="chapter-item expanded "><a href="postgres-convention/notify.html"><strong aria-hidden="true">9.2.16.</strong> Notify</a></li><li class="chapter-item expanded "><a href="postgres-convention/request.html"><strong aria-hidden="true">9.2.17.</strong> Request Workflow</a></li><li class="chapter-item expanded "><a href="postgres-convention/comment.html"><strong aria-hidden="true">9.2.18.</strong> Comments</a></li><li class="chapter-item expanded "><a href="postgres-convention/sample-table-convention.html"><strong aria-hidden="true">9.2.19.</strong> Sample Table</a></li><li class="chapter-item expanded "><a href="postgres-convention/scalability-convention.html"><strong aria-hidden="true">9.2.20.</strong> Scalability</a></li><li class="chapter-item expanded "><a href="postgres-convention/to-be-resolved-convention.html"><strong aria-hidden="true">9.2.21.</strong> To Be Resolved</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="stack-academy.html"><strong aria-hidden="true">10.</strong> Stack Academy</a></li><li class="chapter-item expanded "><a href="terminology.html"><strong aria-hidden="true">11.</strong> Terminology</a></li><li class="chapter-item expanded "><a href="roadmap.html"><strong aria-hidden="true">12.</strong> Roadmap</a></li><li class="chapter-item expanded "><a href="project-history.html"><strong aria-hidden="true">13.</strong> Project History</a></li><li class="chapter-item expanded "><a href="reference.html"><strong aria-hidden="true">14.</strong> References</a></li><li class="chapter-item expanded affix "><li class="spacer"></li><li class="chapter-item expanded "><a href="code-of-conduct.html"><strong aria-hidden="true">15.</strong> Code of Conduct</a></li><li class="chapter-item expanded "><a href="privacy-policy.html"><strong aria-hidden="true">16.</strong> Privacy Policy</a></li><li class="chapter-item expanded affix "><li class="spacer"></li><li class="chapter-item expanded "><a href="blog.html"><strong aria-hidden="true">17.</strong> Blog</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="blog-incus-netbird-phoenixnap.html" class="active"><strong aria-hidden="true">17.1.</strong> Hybrid Cloud Strategy: Incus + Netbird + PhoenixNAP</a></li><li class="chapter-item expanded "><a href="blog-letter-ceo.html"><strong aria-hidden="true">17.2.</strong> Letter to the CEO</a></li><li class="chapter-item expanded "><a href="blog-cli-better.html"><strong aria-hidden="true">17.3.</strong> The CLI is better than...</a></li><li class="chapter-item expanded "><a href="blog-conversational-enterprise-computing.html"><strong aria-hidden="true">17.4.</strong> Why Conversational Enterprise Computing Matters</a></li><li class="chapter-item expanded "><a href="blog-work-instruction-sexy.html"><strong aria-hidden="true">17.5.</strong> Work Instructions Make your Organization Sexy</a></li><li class="chapter-item expanded "><a href="blog-live-markdown-world.html"><strong aria-hidden="true">17.6.</strong> We Live in a Markdown World</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <!-- add things here that will go above the body navigation -->
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="incus--netbird--phoenixnap"><a class="header" href="#incus--netbird--phoenixnap">Incus + Netbird + PhoenixNAP</a></h1>
<ul>
<li>Published: 2025-01-28</li>
<li>Updated: 2025-01-28</li>
<li>Author: Chuck Boecking</li>
<li>Discussion: <a href="https://team.chuck-stack.org/t/hybrid-cloud-strategy-incus-netbird-phoenixnap/75">https://team.chuck-stack.org/t/hybrid-cloud-strategy-incus-netbird-phoenixnap/75</a></li>
</ul>
<h2 id="hybrid-cloud-synergy"><a class="header" href="#hybrid-cloud-synergy">Hybrid Cloud Synergy</a></h2>
<p>The purpose of this post is to highlight what you can accomplish when you combine <a href="./tool-incus.html">Incus</a> with <a href="./tool-netbird.html">Netbird</a> and <a href="https://phoenixnap.com/bare-metal-cloud">PhoenixNAP</a> (a bare-metal cloud provider).</p>
<p>Here is the benefit short story:</p>
<ul>
<li>Create a cost-effective hybrid cloud server with good CPU core count, RAM, and HD at roughly 1/3 to 1/4 the 3-year cost of AWS or Azure</li>
<li>Hire compute skills and knowledge that can be used throughout your organization (not just in the cloud)</li>
<li>Secure your systems and hide them from the outside world</li>
<li>Use any application or service you deem appropriate at any location (Docker + containers + virtual machines)</li>
<li>Connect your world-wide workforce to these services (remote offices + remote workers)</li>
</ul>
<blockquote>
<p>It is important to note that I am a champion of small to medium organizations. You are my target audience. This post was written for you!</p>
</blockquote>
<p>As a result of this article, you can:</p>
<ul>
<li>Minimize recurring costs</li>
<li>Minimize technology skills needed to run a global organization</li>
<li>Maximize options for computing power</li>
</ul>
<h2 id="problem-statement"><a class="header" href="#problem-statement">Problem Statement</a></h2>
<p><strong>Problem #1:</strong> Cloud computing is very expensive relative to the solution in this post. You pay a premium for the CPU AND the disk space (HD) AND just about everything else. I have a customer whose monthly AWS EBS drive cost was more than the EC2 compute cost. These costs reduce your profit and the good your organization can provide the world.</p>
<p><strong>Problem #2:</strong> The expertise needed to articulate a cloud architecture is expensive, and these skills and knowledge cannot be used throughout the rest of your organization. Said another way, typical cloud solutions force you to hire expensive cloud people and trap them in the cloud.</p>
<h2 id="hybrid-cloud-picture-of-success"><a class="header" href="#hybrid-cloud-picture-of-success">Hybrid Cloud Picture of Success</a></h2>
<p>This post helps you solve the problem statements listed above, drive better productivity across your whole organization, and make the most of your collective skills and knowledge.</p>
<p>Before we get into the details of the solution, I want to state a few importing points:</p>
<ul>
<li>Virtualization is important to an organization's success - it helps you make the most of your resources</li>
<li>Virtualization should exist at all levels (cloud, on-premise, desktop, mobile)</li>
<li>The same virtualization tools, skills and knowledge should be applied at all levels (not just cloud)</li>
</ul>
<p>Here is what I am proposing:</p>
<ul>
<li>Use a bare-metal cloud provider like <a href="https://phoenixnap.com/bare-metal-cloud">PhoenixNAP</a> to execute your cloud strategy.
<ul>
<li>They provide the minimum feature set needed to execute your cloud strategy at a more reasonable price (Compute, storage, network) with the ease of use expected from a cloud provider.</li>
</ul>
</li>
<li>Use <a href="./tool-incus.html">Incus</a> to execute your virtualization strategy so that you only need to learn one tool to provide your infrastructure.
<ul>
<li>Use it in the cloud.</li>
<li>Use it in each of your offices.</li>
<li>Use it on desktops.</li>
<li>Use it everywhere you need virtualization.</li>
</ul>
</li>
<li>Connect every virtual server, every office and remote worker to your infrastructure using <a href="./tool-netbird.html">Netbird</a>.</li>
</ul>
<h2 id="implementation-details"><a class="header" href="#implementation-details">Implementation Details</a></h2>
<p>Here are the steps to accomplish my proposed hybrid cloud love story:</p>
<ul>
<li>Create an account at <a href="./tool-netbird.html">Netbird</a>, and create a new setup key. This will take you about 2 minutes.</li>
<li>Create an account at <a href="https://phoenixnap.com/bare-metal-cloud">PhoenixNAP</a> bare-metal service. This will take about 2 minutes.</li>
<li>Create a new PhoenixNAP hourly bare-metal Debian instance with a single CPU, medium core count and medium RAM. This will take you about 4 minutes for purchase and allocation, and it will cost you about $0.30 per hour.</li>
<li>ssh to the server and install <a href="./tool-incus.html">Incus</a>. This will take you about 2 minutes.</li>
<li>Install Netbird. This will take you about 1 minute.
<ul>
<li>Bring up Netbird with your setup key: <code>netbird up --setup-key xxxxx-xxxx-xxxx --allow-server-ssh</code></li>
<li>'Allow ssh' in your Netbird console in addition to the above <code>--allow-server-ssh</code>.</li>
</ul>
</li>
<li>Install Netbird on a local machine so that you can test the connection.</li>
<li>Connect from your local machine to your cloud server via ssh using the Netbird IP/URL.</li>
</ul>
<p>Congratulations! You now have a distributed hybrid cloud computing environment.</p>
<h2 id="lock-it-down"><a class="header" href="#lock-it-down">Lock it Down</a></h2>
<p>After you prove you can connect via the Netbird network, let's lock down your server.</p>
<ul>
<li>ssh to the server via the Netbird IP</li>
<li>Issue the following UFW firewall commands:
<ul>
<li>sudo ufw allow in on wt0 to any # Netbird bridge adapter</li>
<li>sudo ufw allow out on wt0 to any # Netbird bridge adapter</li>
<li>sudo ufw allow in on incusbr0 from any # Incus bridge adapter</li>
<li>sudo ufw allow out on incusbr0 from any # Incus bridge adapter</li>
<li># sudo ufw allow from <your-ip-here> to any port 22 # commented out but convenient in case things go badly</li>
<li>sudo ufw enable</li>
</ul>
</li>
</ul>
<p>These commands configure and enable a firewall to do the following:</p>
<ul>
<li>Allow nothing from the outside world to enter your server</li>
<li>Removes all restrictions around both the Netbird and Incus network adapters</li>
</ul>
<p>It is important to note that I am not a security advisor. You are well advised to validate any claims made here. Here is how I quickly tested the server from a remote machine:</p>
<pre><code class="language-bash">‚ùØ nmap -Pn -p- -T4 &lt;server-public-ip&gt;
Starting Nmap 7.95 ( https://nmap.org ) at 2025-01-28 12:44 CST
Nmap scan report for &lt;server-public-ip&gt;
Host is up.
All 65535 scanned ports on 131.153.231.201 are in ignored states.
Not shown: 65535 filtered tcp ports (no-response)

Nmap done: 1 IP address (1 host up) scanned in 6582.44 seconds
</code></pre>
<h2 id="first-incus-server"><a class="header" href="#first-incus-server">First Incus Server</a></h2>
<p>Let's configure our first Incus cloud server and join it to the Netbird network.</p>
<p>Connect to your Incus server via ssh and launch your first server:</p>
<pre><code class="language-bash">incus launch images:debian/12/cloud debian-01 -d root,size=15GiB
</code></pre>
<p>Connect to your Debian server:</p>
<pre><code class="language-bash">incus exec debian-01 bash
</code></pre>
<p>Install Netbird:</p>
<pre><code class="language-bash">netbird up --setup-key xxxxx-xxxx-xxxx --allow-server-ssh
</code></pre>
<p>Install nginx so that we can see the default page:</p>
<pre><code class="language-bash">sudo apt update
sudo apt install nginx -y
</code></pre>
<p>If all worked as expected, you can exit back to your local machine and test your connection. Do the following:</p>
<ul>
<li>Confirm you can see your Debian machine in your Netbird web console and copy its Netbird URL.</li>
<li>Use your local browser to connect to your Debian server running nginx by simply pasting the Netbird URL in the browser.</li>
</ul>
<h2 id="taking-inventory-of-what-we-accomplished"><a class="header" href="#taking-inventory-of-what-we-accomplished">Taking Inventory of What We Accomplished</a></h2>
<p>I cannot put into words how excited I am about this solution. We created a global network (using Netbird) using a tool that can run anywhere (Incus) to provide service to our organization.</p>
<p>We can test our services on a local desktop, deploy services to a local server, and replicate services to cloud servers... All using the same tools and skills at every step!</p>
<h2 id="cost-comparison"><a class="header" href="#cost-comparison">Cost Comparison</a></h2>
<p>I previously stated this solutions costs between 1/3 and 1/4 that of AWS, Azure and other major cloud providers. The real savings is shockingly more!</p>
<p>Let's break this down:</p>
<ul>
<li>Compute: For a 96 core (192 vCPU) x86 with between about 300GiB of RAM as of the time of this writing:
<ul>
<li>PhoenixNAP is 1/6 the compute cost of AWS
<ul>
<li>PhoenixNAP (s4.x6.c6.Large): $21,000 total paid monthly over 3 years
<ul>
<li>Intel Xeon 6 6731E</li>
<li>256 GiB RAM</li>
<li>4 TB NVMe</li>
<li>2x 25Gbps</li>
</ul>
</li>
<li>AWS (c6a.48xlarge): $131,775 (all upfront on a 3-year reservation standard - non-convertable)
<ul>
<li>384 GiB RAM</li>
<li>No hard drive</li>
<li>50 Gbps</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>PhoenixNAP includes 4TB of storage versus AWS includes not storage. All storage puchased in AWS increases the margin.</li>
<li>PhoenixNAP (in our case) uses Incus for virtualization. This means the same virtualization is used everywhere. This means we only need one skillset. AWS has no on-premise or desktop virtualiztion solution that is consistent with its cloud offering. This means I now need double the number of experts.</li>
<li>Incus allows for on-premise computing using the exact same tools and expertise. <a href="./tool-incus.html#medium-cluster-rack">Per this page</a>, I can purchase 72 cores (144vCPU) of computing power accross 3 servers (redundancy) to run on-premise. We have now almost doubled AWS's computing power across multiple data centers, and we are will less than 1/3 the cost.</li>
<li>AND, we have way more flexibility.</li>
<li>AND, we still reserve the right to use AWS if need arises.</li>
</ul>
<h2 id="frequently-asked-questions"><a class="header" href="#frequently-asked-questions">Frequently Asked Questions</a></h2>
<h3 id="one-or-two-servers"><a class="header" href="#one-or-two-servers">One or Two Servers</a></h3>
<p>Should you create one or two servers in the cloud once you go into production? This is a great question. Understand you need some form of redundancy in case bad things happen. If you have on-premise computing, PhoenixNAP can be your redundancy, in which case you only need one PhoenixNAP server. The opposite is also true.</p>
<p>If PhoenixNAP is your only computing source, you should use two servers. Both can be in production; however, the load/size needs to allow for one server to go offline and still provide all services on the remaining server for at least a period of time.</p>
<h3 id="should-you-use-incus-clustering"><a class="header" href="#should-you-use-incus-clustering">Should you use Incus clustering?</a></h3>
<p>Maybe. Only consider Incus clustering if you have 3 or more servers. Even if you have 3 servers, you should still critically question if you want to cluster. Creating a single cluster from 3 servers adds additional features AND it adds additional complexity.</p>
<p>The additional complexity needs to be justified. It is perfectly acceptable in many circumstances to maintain 3 isolated Incus instances.</p>
<h2 id="learn-more"><a class="header" href="#learn-more">Learn More</a></h2>
<p>If you want help executing the topics in this article, join the <a href="./stack-academy.html">stack-academy</a>. Not ready to join... We can always <a href="../learn-more.html">stay connected</a> to learn more.</p>
<p>To discuss this content in more detail, go to <a href="https://team.chuck-stack.org/t/hybrid-cloud-strategy-incus-netbird-phoenixnap/75">https://team.chuck-stack.org/t/hybrid-cloud-strategy-incus-netbird-phoenixnap/75</a>.</p>

                        <br>
                        <p>Copyright &copy; <script>document.write(new Date().getFullYear())</script>, CHUBOE LLC. All rights reserved.</p> <!--chuboe changed-->
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="blog.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="blog-letter-ceo.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="blog.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="blog-letter-ceo.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>
        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
